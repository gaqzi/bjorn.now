{{ define "title" }}{{ .Title }} - {{ .Site.Title }}{{ end }}

{{ define "head" }}
<style>
    /* Minimal dark mode CSS for the specified HTML snippet */

    /* Box model and base styles */
    *, *::before, *::after {
        box-sizing: border-box;
    }

    :root {
        /* System font stacks */
        --system-sans: Avenir, Montserrat, Corbel, 'URW Gothic', source-sans-pro, sans-serif;
        --system-serif: Charter, 'Bitstream Charter', 'Sitka Text', Cambria, serif;

        /* Dark mode color variables */
        --accent-color-dark: #9E9EFF; /* Browser default link color in dark mode on Firefox and Safari */
        --border-color-standard: #888888;

        /* Spacing variables */
        --space-md: 1rem;
        --space-lg: 2rem;

        /* Set explicit dark mode */
        color-scheme: dark;

        font-size: 18px;
    }

    /* Basic body styling */
    body {
        font-family: var(--system-serif);
        /*max-width: 65ch;*/
        margin: 0 auto;
        padding: 0 var(--space-md);
        line-height: 1.5;
        height: 630px;
        width: 1200px;
    }

    /* Masthead styling */
    header.masthead {
        padding: var(--space-md) 0;
        margin-bottom: var(--space-lg);
        border-bottom: 0.1em solid var(--border-color-standard);
    }

    header.masthead a {
        font-size: 32px;
        font-weight: 800;
        font-family: var(--system-sans);
        letter-spacing: -0.02em;
        color: white; /* Dark mode text color */
        text-decoration: underline;
        text-decoration-color: var(--accent-color-dark);
        text-decoration-thickness: 3px;
        text-underline-offset: 6px;
    }

    header.masthead a:hover {
        color: var(--accent-color-dark);
    }

    /* Main content area */
    main {
        margin-bottom: var(--space-lg);
    }

    /* Article styling */
    article {
        /* Base article styles */
    }

    article header {
        border-bottom: 0.1em solid var(--border-color-standard);
        margin-bottom: var(--space-lg);
        padding-bottom: var(--space-md);
    }

    article.banner header {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    /* Typography for headings */
    h1, h2, h3, h4, h5, h6 {
        font-family: var(--system-sans);
        font-weight: 800;
        margin-top: 0;
        margin-bottom: 0.5rem;
        color: white; /* Dark mode heading color */
    }

    h1 {
        font-size: 80px; /* Starting size, will be adjusted by JS */
        line-height: 1.1;
        max-width: 1000px;
    }

    /* More aggressive scaling for very wide viewports to prioritize single-line */
    @media (min-width: 768px) {
        h1 {
            font-size: clamp(2rem, 3vw + 0.8rem, 3.5rem);
        }
    }

    @media (min-width: 1200px) {
        h1 {
            font-size: clamp(2.2rem, 2.5vw + 1rem, 3.2rem);
        }
    }

    /* Heading group styling */
    hgroup h1 {
        margin-bottom: 0.3em;
    }

    hgroup h1 + p {
        margin-top: 0;
        margin-bottom: 0;
        font-size: 28px; /* Starting size, will be adjusted by JS */
        color: rgba(255, 255, 255, 0.85); /* Dark mode text color */
        font-weight: normal;
        line-height: 1.3;
        /*font-style: italic;*/
    }

    /* Link styling */
    a {
        color: var(--accent-color-dark);
        text-decoration: none;
        transition: color 0.2s ease;
    }

    a:hover {
        text-decoration: underline;
    }

    /* Banner specific adjustments */
    body:has(main article.banner) {
        padding-top: 60px;
        display: flex;
        flex-direction: column;
        /*border: 3px solid #ff0000;*/
        /*box-sizing: border-box;*/
        /*position: relative;*/
        overflow: hidden;
    }

    /*body:has(main article.banner)::before {*/
    /*    content: "1200Ã—630px";*/
    /*    position: absolute;*/
    /*    top: 5px;*/
    /*    right: 5px;*/
    /*    background: #ff0000;*/
    /*    color: white;*/
    /*    padding: 2px 6px;*/
    /*    font-size: 12px;*/
    /*    font-family: monospace;*/
    /*}*/

    body:has(main article.banner) main {
        flex: 1;
        display: flex;
        align-items: center;
        margin-bottom: 0;
    }

    body:has(main article.banner) article.banner {
        width: 100%;
    }
</style>

<script>
    function resizeTextToFit() {
        const title = document.querySelector('h1.title');
        const subtitle = document.querySelector('p.subtitle');
        const maxWidth = 1000;
        const minTitleSize = 32;
        const maxTitleSize = 80;
        const minSubtitleSize = 18;
        const maxSubtitleSize = 40;

        // Reset to max size
        title.style.fontSize = maxTitleSize + 'px';
        subtitle.style.fontSize = maxSubtitleSize + 'px';

        // Reduce title size until it fits on one line
        let titleSize = maxTitleSize;
        while (title.scrollWidth > maxWidth && titleSize > minTitleSize) {
            titleSize -= 2;
            title.style.fontSize = titleSize + 'px';
        }

        // Scale subtitle proportionally - increased from 0.35 to 0.5 for more presence
        const subtitleSize = Math.max(minSubtitleSize, Math.min(maxSubtitleSize, titleSize * 0.6));
        subtitle.style.fontSize = subtitleSize + 'px';
    }

    // Render immediately, in case we go too fast in the screenshotting
    setTimeout(resizeTextToFit, 10);

    // Run on load and resize
    window.addEventListener('load', resizeTextToFit);
    window.addEventListener('resize', resizeTextToFit);
</script>

{{ end }}

{{ define "main" }}
<article class="post single banner">
    <header>
        <hgroup {{ if .Params.language }} lang="{{ .Params.language }}"{{ end }}>
            <h1 class="title">{{ .Title }}</h1>
            {{ with .Params.subtitle }}<p class="subtitle">{{ . }}</p>{{ end }}
        </hgroup>
    </header>
</article>
{{ end }}

{{ define "footer" }}
    &nbsp;
{{ end }}
