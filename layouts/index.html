{{ define "title" }}{{ .Site.Title }}{{ end }}

{{ define "main" }}
<div class="home-content">
    {{ with .Content }}
    <div class="home-intro">
        {{ . }}
    </div>
    {{ end }}

    <div class="recent-posts">
        <h2>Recent Posts</h2>
        {{ $posts := where (where .Site.RegularPages "Section" "posts") "IsPage" true }}
        {{ range first 5 $posts }}
        <article>
            <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
            {{ partial "post-meta.html" . }}
            {{ with .Description }}
            <p class="post-preview">{{ . | truncate 120 }}</p>
            {{ else }}
            <p class="post-preview">{{ .Summary | plainify | truncate 120 }}</p>
            {{ end }}
            <p class="read-more"><a href="{{ .Permalink }}">Read more →</a></p>
        </article>
        {{ end }}
        
        <p class="all-posts-link">
            <a href="/blog/">View all posts →</a>
        </p>
    </div>
</div>
{{ end }}